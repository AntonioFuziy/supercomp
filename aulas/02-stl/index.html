



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://insper.github.io/supercomp/aulas/02-stl/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.6.0">
    
    
      
        <title>02 - Templates e STL - 7s - SuperComputação - Insper 2020/1</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.1b62728e.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#757575">
      
    
    
      <script src="../../assets/javascripts/modernizr.268332fc.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../css/printing.css">
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="grey" data-md-color-accent="red">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#02-templates-e-stl" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <!--
  Copyright (c) 2016-2019 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Application header -->

<script>
    window.site_url = "https://insper.github.io/supercomp/";
</script>

<div class="md-printing-header">
  <img class="cabecalho" src="https://insper.github.io/supercomp/css/cabecalho.png">
  <img class="logo" src="https://insper.github.io/supercomp/css/logo.png">

  <div class="frontmatter">
    <div class="materia"> SuperComputação </div>
    <div class="professor"> Igor Montagner </div>
    <div class="semestre"> 2020/1 </div>
  </div>
</div>
<header class="md-header" data-md-component="header">



  <!-- Top-level navigation -->
  <nav class="md-header-nav md-grid">
    <div class="md-flex">

      <!-- Link to home -->
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://insper.github.io/supercomp/"
            title="7s - SuperComputação - Insper 2020/1"
            class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>      
      <!-- Button to toggle drawer -->
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button"
            for="__drawer"></label>
      </div>
      <!-- Header title -->
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title"
            data-md-component="title">
          
            <span class="md-header-nav__topic">
              7s - SuperComputação - Insper 2020/1
            </span>
            <span class="md-header-nav__topic">
              
                02 - Templates e STL
              
            </span>
          
        </div>
      </div>

      <!-- Button to open search dialogue -->
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button"
              for="__search"></label>

          <!-- Search interface -->
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>

      <!-- Repository containing source -->
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/insper/supercomp/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    SuperComp
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../.." class="md-tabs__link">
        Home
      </a>
    
  </li>

      
        
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../00-organizacao/" class="md-tabs__link md-tabs__link--active">
          Aulas
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../projetos/" class="md-tabs__link">
          Projetos
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://insper.github.io/supercomp/" title="7s - SuperComputação - Insper 2020/1" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    7s - SuperComputação - Insper 2020/1
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/insper/supercomp/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    SuperComp
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../sobre/" title="Sobre" class="md-nav__link">
      Sobre
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Aulas
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Aulas
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../00-organizacao/" title="Organização do repositório" class="md-nav__link">
      Organização do repositório
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../01-intro-cpp/" title="01 - Introdução a C++" class="md-nav__link">
      01 - Introdução a C++
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        02 - Templates e STL
      </label>
    
    <a href="./" title="02 - Templates e STL" class="md-nav__link md-nav__link--active">
      02 - Templates e STL
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#smart-pointers" class="md-nav__link">
    Smart Pointers
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#strings-e-vector" class="md-nav__link">
    Strings e Vector
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#projeto-0-adicionando-stl" class="md-nav__link">
    Projeto 0 - adicionando STL
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../03-cmake/" title="03 - CMake e Debugging no VSCode" class="md-nav__link">
      03 - CMake e Debugging no VSCode
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../04-autovec/" title="04 - SIMD: Autovetorização" class="md-nav__link">
      04 - SIMD: Autovetorização
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Projetos
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Projetos
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../projetos/" title="Índice" class="md-nav__link">
      Índice
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#smart-pointers" class="md-nav__link">
    Smart Pointers
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#strings-e-vector" class="md-nav__link">
    Strings e Vector
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#projeto-0-adicionando-stl" class="md-nav__link">
    Projeto 0 - adicionando STL
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/insper/supercomp/edit/master/docs/aulas/02-stl.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="02-templates-e-stl">02 - Templates e STL<a class="headerlink" href="#02-templates-e-stl" title="Permanent link">&para;</a></h1>
<p>Esta prática consiste primariamente em aprender a usar tipos de dados complexos 
disponibilizados pela STL e pela biblioteca padrão de C++. A atividade principal desta prática 
consiste em modificar o exercício da aula passada para usar as estruturas de dados e 
funções da STL. </p>
<h2 id="smart-pointers">Smart Pointers<a class="headerlink" href="#smart-pointers" title="Permanent link">&para;</a></h2>
<p>Uma das grandes dificuldades de desenvolver em C++ é evitar vazamentos de memória (memory leaks). Durante o desenvolvimento do programa é muito usado o recurso de alocação dinâmica de memória, contudo da mesma forma que o programador tem a responsabilidade de alocar a memória, ele tem de desalocar a memória. Os smart pointers são uma estratégia de evitar que você esqueça de desalocar e crie um programa devorador de memória. Os smart pointers percebem que uma memória alocada não é mais acessível e desaloca a memória.</p>
<p><strong>unique_ptr</strong>: um smart pointer para um único objeto com um dono só. Ou seja, este smart pointer aponta para um objeto que deve ter só um apontamento de cada vez. Ao realizarmos atribuições a variável "dono" do objeto muda. </p>
<p><strong>shared_ptr</strong>: Um smart pointer para um único objeto e pode ter vários donos. Ou seja, este smart pointer aponta para um objeto que pode ter vários apontamentos de cada vez. Ao realizarmos atribuições adicionamos uma nova referência a este dado. Quando não existem mais referências o dado é automaticamente liberado usando <code>delete</code></p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p>O programa abaixo (<em>tarefa1.cpp</em>) tem problemas de memória devido a alocação feita na função <code>cria_vetor</code> e não liberada a cada iteração do for. Conserte o programa usando <code>shared_ptr</code> para que a memória alocada por <code>cria_vetor</code> seja liberada automaticamente. 
<div class="codehilite"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp"></span>

<span class="kt">double</span> <span class="o">*</span><span class="nf">cria_vetor</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">double</span> <span class="o">*</span><span class="n">ptr</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">double</span><span class="p">[</span><span class="n">n</span><span class="p">];</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">prt</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">ptr</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">processa</span><span class="p">(</span><span class="kt">double</span> <span class="o">*</span><span class="n">ptr</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">ptr</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Hello!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">double</span> <span class="o">*</span><span class="n">vec</span> <span class="o">=</span> <span class="n">cria_vetor</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
        <span class="n">processa</span><span class="p">(</span><span class="n">vec</span><span class="p">,</span> <span class="mi">1000</span><span class="p">);</span>
        <span class="c1">// vetor não é deletado no fim do main!</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div></p>
</div>
<h2 id="strings-e-vector">Strings e Vector<a class="headerlink" href="#strings-e-vector" title="Permanent link">&para;</a></h2>
<p>Nesta seção iremos trabalhar com dois conteiners muito usados da STL: <a href="http://www.cplusplus.com/reference/string/">string</a> e <a href="http://www.cplusplus.com/reference/vector/vector/">vector</a>. O objetivo é acostumá-los a consultar a documentação de C++ e entendê-la com autonomia. A STL tem uma quantidade enorme de recursos e aprender a pesquisar como usá-los é importante para sua proficiência. </p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p>Faça um programa que lê uma linha de texto (usando <code>std::getline</code>) e procure nela todas as ocorrências da palavra "hello". Você deverá implementar uma função</p>
<p><code>std::vector&lt;int&gt; find_all(std::string text, std::string term);</code> </p>
<p>que devolve um vetor com a posição de todas as ocorrências de <code>term</code> em <code>text</code>. Sua função <code>main</code> deverá mostrar os resultados da busca de maneira bem formatada. </p>
</div>
<h2 id="projeto-0-adicionando-stl">Projeto 0 - adicionando STL<a class="headerlink" href="#projeto-0-adicionando-stl" title="Permanent link">&para;</a></h2>
<p>O código produzido na última aula parece muito com código <em>C</em> e usa muito pouco dos recursos introduzidos em <em>C++</em> para tornar nossos programas mais legíveis e fáceis de escrever. </p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p>Modifique sua função <code>gera_vetor</code> para usar <code>std::vector</code> ao invés de arrays puros e para usar o cabeçalho <code>&lt;random&gt;</code>. A distribuição usada deverá ser uniforme real com limites 5 a 27.</p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p>Modifique todas as funções (<code>log</code>, <code>sqrt</code>, <code>pow3</code>, <code>pow3mult</code> e <code>sum</code>) para receber <code>std::vector</code>. Note que você não precisa mais receber como argumento o tamanho do vetor. </p>
</div>
<div class="admonition question short">
<p class="admonition-title">Question</p>
<p>Qual deverá ser a assinatura das funções acima para evitar que ocorra cópia do <code>std::vector</code>?</p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p>Continuando o exercício acima, use iteradores para percorrer seu <code>std::vector</code>. Para deixar o código mais legível use <code>auto</code></p>
</div>
<p>Vamos agora trabalhar com programação funcional em <em>C++</em> para tornar nosso código menor: armazenamento de referências para funções em variáveis e definição de funções usando <code>lambda</code>. </p>
<p>Podemos definir funções no meio de nosso programa usando a seguinte sintaxe:</p>
<div class="codehilite"><pre><span></span><span class="p">[</span><span class="o">&amp;|=</span><span class="p">]</span> <span class="p">(</span><span class="n">argumentos</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">retorno</span> <span class="p">{</span>
    <span class="n">corpo</span> <span class="n">da</span> <span class="n">função</span> <span class="n">aqui</span>
<span class="p">};</span>
</pre></div>

<p>Uma função definida desta maneira pode usar as variáveis locais disponíveis no momento em que ela foi declarada (mesmo que não sejam passadas como argumento). A primeira parte da declaração define se essas variáveis serão copiadas <code>[=]</code> ou se uma referência para elas será utilizada na função <code>[&amp;]</code>. O restante segue padrões normalmente usados em <em>C++</em>. </p>
<p>Podemos inclusive, passar essas funções como argumentos e devolvê-las como resultado de funções. Para isto usamos o tipo <code>std::function</code> disponível no cabeçalho <code>functional</code>. Os exercícios abaixo foram extraídos do arquivo <code>exemplos-lambda.cpp</code>. Faça-os e cheque seus resultados rodando o programa. Se houver dúvida chame o professor. </p>
<div class="admonition question short">
<p class="admonition-title">Question</p>
<p>Qual é o resultado do código abaixo?</p>
<div class="codehilite"><pre><span></span><span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">function</span><span class="o">&lt;</span><span class="kt">double</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="o">&gt;</span> <span class="n">by_two</span> <span class="o">=</span> <span class="p">[</span><span class="o">=</span><span class="p">](</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kt">double</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">/</span> <span class="n">c</span><span class="p">;</span> 
<span class="p">};</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">by_two</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
</pre></div>

</div>
<div class="admonition question short">
<p class="admonition-title">Question</p>
<p>Qual é o resultado do código abaixo?</p>
<div class="codehilite"><pre><span></span><span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">function</span><span class="o">&lt;</span><span class="kt">double</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="o">&gt;</span> <span class="n">by_c</span> <span class="o">=</span> <span class="p">[</span><span class="o">&amp;</span><span class="p">](</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kt">double</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">/</span> <span class="n">c</span><span class="p">;</span> 
<span class="p">};</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">by_c</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
<span class="n">c</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">by_c</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
</pre></div>

</div>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Escreva abaixo o tipo de uma variável que guarda referência para as funções que testamos neste exercício</p>
<ul>
<li><code>log</code></li>
<li><code>sqrt</code></li>
<li><code>pow3</code></li>
<li><code>pow3mult</code></li>
<li><code>sum</code></li>
</ul>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p>Crie uma função <code>std::vector&lt;double&gt; teste_incremental(</code><strong>tipo aqui</strong><code>)</code> que recebe um ponteiro para o tipo das funções acima e executa a função recebida com tamanhos de vetores incrementalmente maiores. Sua função deverá devolver os tempos (em segundos) para todas as execuções feitas. Ou seja, a função teste_incremental deverá funcionar como uma "casquinha" que gera vetores, roda as funções matemáticas testadas e retorna seus tempos de execução.</p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p>você deve ter notado que a função <code>sum</code> não possui a mesma assinatura das outras. Use uma função <code>lambda</code> para adaptar os tipos e usar a função acima para testar a função <code>sum</code> também. </p>
</div>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../01-intro-cpp/" title="01 - Introdução a C++" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                01 - Introdução a C++
              </span>
            </div>
          </a>
        
        
          <a href="../03-cmake/" title="03 - CMake e Debugging no VSCode" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                03 - CMake e Debugging no VSCode
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.808e90bb.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
      
        <script src="../../translate-admonitions.js"></script>
      
    
  </body>
</html>